{
  "hash": "c5fbc41789f5a6264a7b53419beb3112",
  "result": {
    "markdown": "---\ntitle: \"In-class_Ex09e\"\nauthor: \"Mohamad Hafez Sidek\"\ndate: \"April 13, 2024\"\ndate-modified: \"last-modified\"\nexecute:\n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n  message: false\n---\n\n\n**Installing R Packages**\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(treemap, treemapify, tidyverse) \n```\n:::\n\n\n**Loading Data**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis2018 <- read_csv(\"data/realis2018.csv\")\n```\n:::\n\n\nGrouped summaries without the Pipe\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis2018_grouped <- group_by(realis2018, `Project Name`,\n                               `Planning Region`, `Planning Area`, \n                               `Property Type`, `Type of Sale`)\nrealis2018_summarised <- summarise(realis2018_grouped, \n                          `Total Unit Sold` = sum(`No. of Units`, na.rm = TRUE),\n                          `Total Area` = sum(`Area (sqm)`, na.rm = TRUE),\n                          `Median Unit Price ($ psm)` = median(`Unit Price ($ psm)`, na.rm = TRUE), \n                          `Median Transacted Price` = median(`Transacted Price ($)`, na.rm = TRUE))\n```\n:::\n\n\nGrouped summaries with the pipe\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis2018_summarised <- realis2018 %>% \n  group_by(`Project Name`,`Planning Region`, \n           `Planning Area`, `Property Type`, \n           `Type of Sale`) %>%\n  summarise(`Total Unit Sold` = sum(`No. of Units`, na.rm = TRUE), \n            `Total Area` = sum(`Area (sqm)`, na.rm = TRUE),\n            `Median Unit Price ($ psm)` = median(`Unit Price ($ psm)`, na.rm = TRUE),\n            `Median Transacted Price` = median(`Transacted Price ($)`, na.rm = TRUE))\n```\n:::\n\n\nDesigning Treemap with treemap Package\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis2018_selected <- realis2018_summarised %>%\n  filter(`Property Type` == \"Condominium\", `Type of Sale` == \"Resale\")\n```\n:::\n\n\nUsing the basic arguments\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreemap(realis2018_selected,\n        index=c(\"Planning Region\", \"Planning Area\", \"Project Name\"),\n        vSize=\"Total Unit Sold\",\n        vColor=\"Median Unit Price ($ psm)\",\n        title=\"Resale Condominium by Planning Region and Area, 2017\",\n        title.legend = \"Median Unit Price (S$ per sq. m)\"\n        )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nWorking with vColor and type argument\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreemap(realis2018_selected,\n        index=c(\"Planning Region\", \"Planning Area\", \"Project Name\"),\n        vSize=\"Total Unit Sold\",\n        vColor=\"Median Unit Price ($ psm)\",\n        type = \"value\",\n        title=\"Resale Condominium by Planning Region and Area, 2017\",\n        title.legend = \"Median Unit Price (S$ per sq. m)\"\n        )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nThe value\" type treemap\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreemap(realis2018_selected,\n        index=c(\"Planning Region\", \"Planning Area\", \"Project Name\"),\n        vSize=\"Total Unit Sold\",\n        vColor=\"Median Unit Price ($ psm)\",\n        type=\"value\",\n        palette=\"RdYlBu\", \n        title=\"Resale Condominium by Planning Region and Area, 2017\",\n        title.legend = \"Median Unit Price (S$ per sq. m)\"\n        )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nThe \"manual\" type treemap\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreemap(realis2018_selected,\n        index=c(\"Planning Region\", \"Planning Area\", \"Project Name\"),\n        vSize=\"Total Unit Sold\",\n        vColor=\"Median Unit Price ($ psm)\",\n        type=\"manual\",\n        palette=\"RdYlBu\", \n        title=\"Resale Condominium by Planning Region and Area, 2017\",\n        title.legend = \"Median Unit Price (S$ per sq. m)\"\n        )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nSingle colour palette\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreemap(realis2018_selected,\n        index=c(\"Planning Region\", \"Planning Area\", \"Project Name\"),\n        vSize=\"Total Unit Sold\",\n        vColor=\"Median Unit Price ($ psm)\",\n        type=\"manual\",\n        palette=\"Blues\", \n        title=\"Resale Condominium by Planning Region and Area, 2017\",\n        title.legend = \"Median Unit Price (S$ per sq. m)\"\n        )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nWorking with algorithm argument\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreemap(realis2018_selected,\n        index=c(\"Planning Region\", \"Planning Area\", \"Project Name\"),\n        vSize=\"Total Unit Sold\",\n        vColor=\"Median Unit Price ($ psm)\",\n        type=\"manual\",\n        palette=\"Blues\", \n        algorithm = \"squarified\",\n        title=\"Resale Condominium by Planning Region and Area, 2017\",\n        title.legend = \"Median Unit Price (S$ per sq. m)\"\n        )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nUsing sortID\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreemap(realis2018_selected,\n        index=c(\"Planning Region\", \"Planning Area\", \"Project Name\"),\n        vSize=\"Total Unit Sold\",\n        vColor=\"Median Unit Price ($ psm)\",\n        type=\"manual\",\n        palette=\"Blues\", \n        algorithm = \"pivotSize\",\n        sortID = \"Median Transacted Price\",\n        title=\"Resale Condominium by Planning Region and Area, 2017\",\n        title.legend = \"Median Unit Price (S$ per sq. m)\"\n        )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nDesigning a basic treemap\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=realis2018_selected, \n       aes(area = `Total Unit Sold`,\n           fill = `Median Unit Price ($ psm)`),\n       layout = \"scol\",\n       start = \"bottomleft\") + \n  geom_treemap() +\n  scale_fill_gradient(low = \"light blue\", high = \"blue\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nDefining hierarchy\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=realis2018_selected, \n       aes(area = `Total Unit Sold`,\n           fill = `Median Unit Price ($ psm)`,\n           subgroup = `Planning Region`),\n       start = \"topleft\") + \n  geom_treemap()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nGroup by Planning Area\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=realis2018_selected, \n       aes(area = `Total Unit Sold`,\n           fill = `Median Unit Price ($ psm)`,\n           subgroup = `Planning Region`,\n           subgroup2 = `Planning Area`)) + \n  geom_treemap()\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nAdding boundary line\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=realis2018_selected, \n       aes(area = `Total Unit Sold`,\n           fill = `Median Unit Price ($ psm)`,\n           subgroup = `Planning Region`,\n           subgroup2 = `Planning Area`)) + \n  geom_treemap() +\n  geom_treemap_subgroup2_border(colour = \"gray40\",\n                                size = 2) +\n  geom_treemap_subgroup_border(colour = \"gray20\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nInstalling d3treeR package\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#install.packages(\"devtools\")\n```\n:::\n\n\nInstall devtools\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#library(devtools)\n#install_github(\"timelyportfolio/d3treeR\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(d3treeR)\n```\n:::\n\n\nDesigning An Interactive Treemap\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntm <- treemap(realis2018_summarised,\n        index=c(\"Planning Region\", \"Planning Area\"),\n        vSize=\"Total Unit Sold\",\n        vColor=\"Median Unit Price ($ psm)\",\n        type=\"value\",\n        title=\"Private Residential Property Sold, 2017\",\n        title.legend = \"Median Unit Price (S$ per sq. m)\"\n        )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex09e_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Hands-on_Ex09e_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}